<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>使用grayQueue模板的demo</title>
<script src="http://a.tbcdn.cn/s/kissy/1.2.0/kissy.js"></script>
<link href="assets/demo.css" rel="stylesheet"/>
</head>
<body>

<article id="main">
    <h4>使用grayQueue模板的demo</h4>
    <div class="demo-wrapper">
        <form action="test.php">
            <div class="uploader-wrapper gray-queue">
                <div class="clearfix header-footer gray-queue-header">
                    <div class="f-l file-name">文件名</div>
                    <div class="f-r file-status">状态</div>
                    <div class="f-r file-size">文件大小</div>
                </div>
                <ul class="gray-queue-list" id="J_UploaderQueue">
                    
                </ul>
                <div class="clearfix header-footer gray-queue-footer">
                    <div class="f-l uploader-btn-wrapper">
                        <a id="J_UploaderBtn" class="f-l uploader-button uploader-button-focus" data-config='{"theme" : "uploader/themes/grayQueue","autoUpload" : false,"type" : "auto","serverConfig":{"action":"upload.php","data":{"dir":"files/"},"dataType" : "json"},"name":"Filedata","urlsInputName":"fileUrls"}' href="#">
                            选择文件
                        </a>
                        <a id="J_StartUpload" class="f-l uploader-button start-upload uploader-button-disabled" href="#">开始上传</a>
                    </div>
                    <div id="J_TotalProgressNum" class="f-r file-status clearfix">
                        0%
                    </div>
                    <div id="J_TotalSize" class="f-r file-size"></div>
                    <div id="J_ProgressBar" class=" f-r progress-wrapper">

                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
        KISSY.Config.base = '../../';
        KISSY.use('node', function(S, Node) {
            var $ = Node.all;
            KISSY.use('uploader/render', function(S, RenderUploader) {
                var renderUploader = new RenderUploader('#J_UploaderBtn', '#J_UploaderQueue'),
                        uploader;
                renderUploader.on('init',function(ev){
                    uploader = ev.uploader;
                    $('#J_StartUpload').on('click',function(){
                        uploader.uploadWaitFiles();
                    })
                });
            })
        });
    </script>
</article>
</body>
</html>